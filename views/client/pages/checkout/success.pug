extends ../../layouts/default.pug
include ../../mixins/box-head
include ../../mixins/product-layout
include ../../mixins/alert


block main
    +alert-success(3000)
    +alert-error(3000)

    .container.mb-3
        .row 
            .col-12 
                +box-head("Thanh toán thành công")

        .row 
            div(class="alert alert-success")
                i.bi.bi-check-circle-fill.me-2.fs-4
                | Chúc mừng bạn đã đặt hàng thành công! Chúng tôi sẽ xử lý đơn hàng của bạn trong thời gian sớm nhất.

        // Hiển thị trạng thái thanh toán
        .row.mt-2
            .col-12
                if paymentStatus === "completed"
                    .alert.alert-success.text-center.py-3
                        i.bi.bi-check-circle-fill.me-2.fs-5.text-success
                        | #{paymentMessage}
                else if paymentStatus === "failed"
                    .alert.alert-danger.text-center.py-3
                        i.bi.bi-x-circle-fill.me-2.fs-5.text-danger
                        | #{paymentMessage}
                else if paymentStatus === "error"
                    .alert.alert-warning.text-center.py-3
                        i.bi.bi-exclamation-triangle-fill.me-2.fs-5.text-warning
                        | #{paymentMessage}
                else
                    .alert.alert-info.text-center.py-3
                        i.bi.bi-hourglass-split.me-2.fs-5.text-info
                        | #{paymentMessage}

        if(order)
            .row.mt-4
                .col-12
                    .card.shadow-sm.rounded
                        .card-header.bg-success.text-white
                            h4.text-center Thông tin cá nhân
                        .card-body
                            .row.g-3
                                .col-md-6
                                    .d-flex.align-items-center
                                        i.bi.bi-person-fill.me-2.fs-5.text-success
                                        label.fw-bold.text-success Họ tên
                                    p.mt-2.mb-0.fw-medium #{order.userInfo.fullName}
                                .col-md-6
                                    .d-flex.align-items-center
                                        i.bi.bi-telephone-fill.me-2.fs-5.text-success
                                        label.fw-bold.text-success Số điện thoại
                                    p.mt-2.mb-0.fw-medium #{order.userInfo.phone}
                                .col-md-12
                                    .d-flex.align-items-center
                                        i.bi.bi-geo-alt-fill.me-2.fs-5.text-success
                                        label.fw-bold.text-success Địa chỉ
                                    p.mt-2.mb-0.fw-medium #{order.userInfo.address}

            .row.mt-4
                .col-12
                    .card.shadow-sm.rounded
                        .card-header.bg-success.text-white
                            h4.text-center Thông tin đơn hàng
                        .card-body
                            if order.products.length > 0
                                table.table.table-striped.table-hover.text-center.align-middle
                                    thead
                                    tr
                                        th STT
                                        th Ảnh
                                        th Tên
                                        th Giá (vnd)
                                        th Số lượng
                                        th Thành tiền (vnd)
                                    tbody
                                    each item, index in order.products
                                        tr
                                        td #{index + 1}
                                        td
                                            img(src=item.productInfo.thumbnail alt=item.productInfo.title width="80px" class="rounded")
                                        td
                                            span #{item.productInfo.title}
                                        td #{item.priceFormat}
                                        td #{item.quantity}
                                        td #{item.totalPriceFormat}
                            .card-footer.bg-light.text-end
                            h4 Tổng đơn hàng: 
                                span.text-danger #{order.totalPriceFormat} (vnd)